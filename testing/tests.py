import sys, os
sys.path.append(os.path.abspath(os.path.join('..')))
import bin.myls as myls

import logging

logging.basicConfig(
    level=logging.DEBUG,
    format='%(levelname)s\t%(asctime)s\t%(message)s',
    datefmt='%Y-%m-%d %H:%M:%S%z')



def test_HumanReadableByte(capsys):

    entries = {
        'auto':[
            (0, '0 Bytes'),
            (1, '1 Byte'),
            (72, '72 Bytes'),
            (1000, '1.0 kB'),
            (1024, '1.0 kB'),
            (1000 * 1000, '1.0 MB'),
            (1024 * 1024, '1.0 MB'),
            (1000 * 1000 * 1000, '1.0 GB'),
            (1024 * 1024 * 1000, '1.0 GB'),
            (1000 * 1000 * 1000 * 1000, '1.0 TB'),
            (1024 * 1024 * 1000 * 1000, '1.0 TB'),
        ],
        'B':[
            (0, '0B'),
            (1, '1B'),
            (72, '72B'),
            (1000, '1000B'),
            (1024, '1024B'),
            (1000 * 1000, '1000000B'),
            (1024 * 1024, '1048576B'),
            (1000 * 1000 * 1000, '1000000000B'),
            (1024 * 1024 * 1000, '1048576000B'),
            (1000 * 1000 * 1000 * 1000, '1000000000000B'),
            (1024 * 1024 * 1000 * 1000, '1048576000000B'),
        ],
        'kB':[
            (0, '0kB'),
            (1, '1B'),
            (72, '72B'),
            (1000, '1000B'),
            (1024, '1kB'),
            (1000 * 1000, '976kB'),
            (1024 * 1024, '1024kB'),
            (1000 * 1000 * 1000, '976562kB'),
            (1024 * 1024 * 1000, '1024000kB'),
            (1000 * 1000 * 1000 * 1000, '976562500kB'),
            (1024 * 1024 * 1000 * 1000, '1024000000kB'),
        ],
        'MB':[
            (0, '0MB'),
            (1, '1B'),
            (72, '72B'),
            (1000, '1000B'),
            (1024, '1kB'),
            (1000 * 1000, '976kB'),
            (1024 * 1024, '1MB'),
            (1000 * 1000 * 1000, '953MB'),
            (1024 * 1024 * 1000, '1000MB'),
            (1000 * 1000 * 1000 * 1000, '953674MB'),
            (1024 * 1024 * 1000 * 1000, '1000000MB'),
        ],
        'GB':[
            (0, '0GB'),
            (1, '1B'),
            (72, '72B'),
            (1000, '1000B'),
            (1024, '1kB'),
            (1000 * 1000, '976kB'),
            (1024 * 1024, '1MB'),
            (1000 * 1000 * 1000, '953MB'),
            (1024 * 1024 * 1000, '1000MB'),
            (1000 * 1000 * 1000 * 1000, '931GB'),
            (1024 * 1024 * 1000 * 1000, '976GB'),
        ]
    }

    for unit, values in entries.items():
        logging.debug('Start test hrb with unit "%s"', unit)
        hrb = myls.HumanReadableByte(unit)
        print(values)

        assert 1 == 1

        for value in values:
            tested, expected = value
            assert expected == hrb.convert(tested)
